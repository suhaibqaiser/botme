<div class="text-center mt-5" *ngIf="loading">
  <div class="spinner-border text-center text-primary" role="status"></div>
</div>
<div style="padding-left: 230px; color: black; font-size: 14px;" >Filter by order type
  <span style="margin-left: 20px;">Filter by status</span>
  <span style="margin-left: 25px;">Filter by device type</span>
</div>
<form>
  <div class="form-group">
    <input (change)="filterCustomersByName($event)"
    type="text"
    placeholder="Customer Name"
    style="width: 200px; padding: 2px 20px; margin: 10px 0px; height: 40px;"
    id="entityId-search"
    
    
    >
   <button style=" height: 40px; width: 40px; border: none; background-color: #02D3EF;"><i class="fa fa-search icon" ></i></button> 

   <select style="margin-left:25px; height: 40px;" (click)="sortByOrder()" [formControl]="sortControl">
    <option *ngFor="let item of sortType" [value]="item.value">{{item.name}}</option>
  </select>

  <select style="margin-left:45px; height: 40px;"(click)="sortByStatus()" [formControl]="sortControlStatus">
    <option *ngFor="let item of sortStatus" [value]="item.value">{{item.name}}</option>
  </select>


    <select style="margin-left:50px; height: 40px;" (click)="sortByDeviceType()" [formControl]="sortControlType">
      <option *ngFor="let item of sortDevice" [value]="item.value">{{item.name}}</option>
    </select>
  
 

  <input
  (change)="  filterOrdersByLabel($event)"
  type="text"
  placeholder="Order Id"
  style="width: 150px; padding: 2px 20px; margin: 10px 0px; height: 40px; margin-left: 50px;"
  id="entityId-search"
  >
 <button style=" height: 40px; width: 40px; border: none; background-color: #02D3EF;"><i class="fa fa-search icon" ></i></button> 

 <input type="date" style="height: 40px; margin-left: 40px; ">
  </div>
</form>





<div class="text-center mt-5" *ngIf="!loading  && !orders.length">
  <h6>No Orders Found!</h6>
</div>
<div *ngIf="orders && orders.length" class="row mt-4">
  <div *ngFor="let order of orders" class="col-lg-4">
    <div class="card order_card">
      <div class="card-body">
        <div class="customer d-flex justify-content-between align-items-center text-center">
          <h4>Customer: <strong>{{order.customer ? order.customer.customerName : '-'}}</strong></h4>
          <h4 style="cursor: pointer"><span [title]="_helperService.computeOrderMessages(order.orderStatus)"
                                            [classList]="_helperService.computeOrderStatusColor(order.orderStatus)">{{order.orderStatus}}</span>
          </h4>
        </div>
        <hr class="mt-1">
        <h4
          class="text-center">{{_helperService.computeOrderType(order.orderType).orderText + ': ' + order.orderLabel}}</h4>
        <div class="head d-flex align-items-center justify-content-between">
          <h4>Price
            <br>
            Order Type
            <br>
            Time
          </h4>
          <h4 style="cursor: pointer" class="text-right">{{'$' + _helperService.roundToTwo(order.productTotalPrice)}}
            <br> {{order.orderType}} <br> {{_helperService.timeAgo(order.orderTimestamp)}}</h4>
        </div>
        <hr>

        <div *ngFor="let cart of order.carts" class=cart_items>
          <h4><strong>Item:</strong> {{cart.product.productName}} {{'(' + cart.productQuantity + ' x ' }} <span
            *ngFor="let rate of cart.productRate | keyvalue">{{rate.key + ')'}}</span></h4>
          <h4 *ngIf="cart.productFlavor"><strong>Flavor :</strong> {{cart.productFlavor}}</h4>
          <h4 *ngIf="cart.productIngredients && cart.productIngredients.length"><strong>Ingredients
            :</strong> {{_helperService.computeProductsForOrderCart('ingredients', cart.productIngredients, products)}}
          </h4>
          <h4 *ngIf="cart.productOptions && cart.productOptions.length"><strong>Options
            :</strong> {{_helperService.computeProductsForOrderCart('options', cart.productOptions, products)}}</h4>
          <h4 *ngIf="cart.productToppings && cart.productToppings.length"><strong>Toppings
            :</strong> {{_helperService.computeProductsForOrderCart('', cart.productToppings, products)}}</h4>
          <h4 *ngIf="cart.productProportion && cart.productProportion.length"><strong>Addons
            :</strong> {{_helperService.computeProductsForOrderCart('', cart.productProportion, products)}}</h4>
          <hr>
        </div>
        <div class="d-flex justify-content-between">
          <button (click)="updateOrderStatus(order,'delivered')" class="btn mt-2 btn-sm detial_btn btn-success">complete
            order
          </button>
          <button (click)="viewOrderDetail(order)" class="btn mt-2 btn-sm detial_btn btn-info">view details
          </button>
          <button (click)="updateOrderStatus(order,'cancel')" class="btn mt-2 btn-sm detial_btn btn-warning">cancel
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

